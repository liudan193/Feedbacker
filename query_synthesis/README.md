# Generate New Queries

In this repository, we provide instructions on how to use our proposed **RealMix** to generate new queries.

It is very easy to use, and all of these support **checkpoint resume** functionality, so you can stop and restart at any time.

## 1. Generate New Queries

```bash
python query_generation.py --domain your_domain
```

This code requires two modifications:
- The query generation model, which requires an OpenAI-compatible LLM service.
```python
models = [{"query_model": "gpt-4o", "query_base_url": 'http://localhost:8006/', "query_api_key": "any"},
          {"query_model": "deepseek-v3", "query_base_url": 'http://localhost:8006/', "query_api_key": "any"},
          {"query_model": "qwen-max", "query_base_url": 'http://localhost:8006/', "query_api_key": "any"}, ]
```
- The random seed. To support checkpoint resume, you need to fix the random seed, otherwise, the data IDs will be different each time.
```python
np.random.seed(42)
random.seed(42)
```

## 2. Annotate Quality and Tags

```bash
python annotate_quality.py --domain your_domain
python annotate_tags.py  --domain your_domain
```

These two scripts also require model modifications. Itâ€™s best to use a reasoning model.

```python
models = [{"query_model": "QwQ-32B", "query_base_url": "http://localhost:8006/", "query_api_key": "any"},
          {"query_model": "DeepSeek-R1", "query_base_url": "http://localhost:8006/", "query_api_key": "any"},
          {"query_model": "o3-mini", "query_base_url": "http://localhost:8006/", "query_api_key": "any"}]
```

## 3. Merge Quality and Tags

```bash
python merge_quality_tags.py
```

Finally, the generated queries can be found in `outputs/generated_queries_with_quality_tags.jsonl`.

We have already provided some examples in the `./outputs` directory for demonstration purposes. Note that these results are generated by a low-cost model and the quality is quite poor. You need to replace them with results from your own model service. 